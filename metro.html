<!DOCTYPE html>
<html lang="fr">
<head>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%230000AA%22>:v</text></svg>">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MÉTRO</title>
<style>
@keyframes flicker{0%,100%{opacity:1}50%{opacity:0.96}}
@keyframes scanline{0%{transform:translateY(-100%)}100%{transform:translateY(100vh)}}
@keyframes blink{0%,49%{opacity:1}50%,100%{opacity:0}}
@keyframes scroll{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}
@keyframes ledFlicker{0%,100%{opacity:1}92%{opacity:1}93%{opacity:0.7}94%{opacity:1}}
@keyframes pulseSecret{0%,100%{box-shadow:0 0 5px rgba(255,0,0,0.3)}50%{box-shadow:0 0 15px rgba(255,0,0,0.6)}}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-2px)}75%{transform:translateX(2px)}}

*{margin:0;padding:0;box-sizing:border-box;cursor:none}
body{ background:#0000AA; color:#fff; font-family:"Courier New",monospace; font-size:14px;
  min-height:100vh; padding:30px; animation:flicker 0.15s infinite;
  display:flex; flex-direction:column; align-items:center; }
body::before{content:'';position:fixed;top:0;left:0;width:100%;height:2px;background:linear-gradient(transparent,rgba(255,255,255,0.1),transparent);animation:scanline 8s linear infinite;pointer-events:none;z-index:1000}
body::after{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,rgba(0,0,0,0.15),rgba(0,0,0,0.15) 1px,transparent 1px,transparent 2px);pointer-events:none;z-index:999}

.content{max-width:900px;width:100%;position:relative;z-index:1}
.logo{border:2px solid #fff;display:inline-block;text-decoration:none;padding:4px 16px;margin-bottom:15px;text-decoration:none;color:#fff}
.logo span{background:#fff;color:#0000AA;padding:0 4px;font-weight:bold}
.station-name{text-align:center;font-size:24px;font-weight:bold;letter-spacing:4px;margin:20px 0;color:#ff6600}
.display-frame{ background:#333; border:6px solid #555; border-radius:4px; padding:15px;
  box-shadow:inset 0 0 30px rgba(0,0,0,0.5),0 0 20px rgba(0,0,0,0.5); }
.display-header{display:flex;justify-content:space-between;padding-bottom:8px;border-bottom:2px solid #444;margin-bottom:10px;color:#ff6600;font-size:12px}
.departures{display:flex;flex-direction:column;gap:4px}
.departure{ display:grid; grid-template-columns:50px 1fr 80px; gap:12px; padding:8px 10px;
  background:#111; align-items:center; animation:ledFlicker 3s infinite; cursor:default; }
.departure:nth-child(odd){animation-delay:0.5s}
.departure.secret-station{ cursor:pointer; transition:all 0.3s; }
.departure.secret-station:hover{ background:#220000; animation:pulseSecret 1s infinite; }
.line-badge{ font-size:16px;font-weight:bold;text-align:center; padding:4px 8px;border-radius:3px;color:#fff; }
.line-1{background:#FFCD00;color:#000}
.line-4{background:#CF009E}
.line-7{background:#FA9ABA;color:#000}
.line-V{background:#8B0000}
.line-X{background:#000;border:2px solid #f00}
.line-L{background:#000;border:2px solid #FFD700;color:#FFD700}
.destination{color:#ff6600;font-size:14px;letter-spacing:1px;overflow:hidden;white-space:nowrap}
.destination.glitch{animation:blink 0.3s infinite}
.arrival{color:#ff6600;font-size:16px;font-weight:bold;text-align:right}
.arrival.soon{color:#f00;animation:blink 0.5s infinite}
.arrival.error{color:#f00}
.ticker{margin-top:10px;padding-top:10px;border-top:2px solid #444;overflow:hidden;white-space:nowrap}
.ticker-text{display:inline-block;color:#ff6600;font-size:11px;animation:scroll 25s linear infinite;padding-left:100%}
.info-panel{ margin-top:15px; background:#c0c0c0; border:2px outset #fff; padding:10px; color:#000; font-size:11px; }
.info-title{font-weight:bold;margin-bottom:5px}
.status-bar{background:#c0c0c0;padding:4px 8px;margin-top:15px;border:2px outset #fff;font-size:11px;color:#000;display:flex;justify-content:space-between;width:100%}
.status-section{border:2px inset #808080;padding:1px 8px}
.cursor{position:fixed;width:14px;height:14px;background:#fff;pointer-events:none;z-index:10000;mix-blend-mode:difference;display:none}
body:hover .cursor{display:block}
.hint{position:fixed;bottom:50px;left:50%;transform:translateX(-50%);font-size:10px;color:rgba(255,102,0,0.3);font-style:italic}
</style>
</head>
<body>
<div class="cursor" id="cursor"></div>

<div class="content">
  <a href="borne.html" class="logo"><span>:vitalism</span></a>
  <div class="station-name">STATION VITALISM</div>
  <div class="display-frame">
    <div class="display-header">
      <span>PROCHAINS DÉPARTS</span>
      <span id="clock">--:--</span>
    </div>
    <div class="departures">
      <div class="departure">
        <span class="line-badge line-1">1</span>
        <span class="destination">La Défense - Grande Arche</span>
        <span class="arrival" id="t1">2 min</span>
      </div>
      <div class="departure">
        <span class="line-badge line-4">4</span>
        <span class="destination">Porte de Clignancourt</span>
        <span class="arrival" id="t2">4 min</span>
      </div>
      <div class="departure">
        <span class="line-badge line-7">7</span>
        <span class="destination">Villejuif - Louis Aragon</span>
        <span class="arrival" id="t3">7 min</span>
      </div>
      <div class="departure">
        <span class="line-badge line-V">V</span>
        <span class="destination">Au-delà du Réel</span>
        <span class="arrival">∞</span>
      </div>
      <div class="departure">
        <span class="line-badge line-V">V</span>
        <span class="destination">Hier (direction inverse)</span>
        <span class="arrival soon">-3 min</span>
      </div>
      <div class="departure" id="lineXerr" style="cursor:pointer">
        <span class="line-badge line-X">X</span>
        <span class="destination glitch">▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</span>
        <span class="arrival error">ERR</span>
      </div>
      <div class="departure">
        <span class="line-badge line-X">X</span>
        <span class="destination">Vous êtes déjà arrivé</span>
        <span class="arrival">0</span>
      </div>
      <div class="departure secret-station">
        <span class="line-badge line-L">L</span>
        <span class="destination">Terminus - Le Labyrinthe</span>
        <span class="arrival">?</span>
      </div>
    </div>
    <div class="ticker">
      <span class="ticker-text">
        ◆ Service normal sur l'ensemble du réseau ◆ Ligne V: Correspondance avec le rêve à Terminus ◆ Ligne X: Cette ligne n'existe pas ◆ Ligne L: Correspondance avec le fil d'Ariane ◆ Pensez à valider votre conscience avant de monter ◆ La RATP vous souhaite un agréable voyage vers l'inconnu ◆
      </span>
    </div>
  </div>
  <div class="info-panel">
    <div class="info-title">INFORMATIONS VOYAGEURS</div>
    <div>• La ligne V ne figure sur aucun plan officiel</div>
    <div>• La ligne X a été supprimée en 1952 mais continue de circuler</div>
    <div>• Ne regardez pas les autres passagers dans les yeux</div>
  </div>
  <div class="status-bar">
    <span><span class="status-section">SNCF/RATP</span> <span class="status-section">Mise à jour en temps réel</span></span>
    <span><span class="status-section" id="fullClock">--:--:--</span></span>
  </div>
</div>
<div class="hint">Certaines stations mènent ailleurs...</div>

<script>
const cursor=document.getElementById('cursor');
document.addEventListener('mousemove',e=>{cursor.style.left=e.clientX+'px';cursor.style.top=e.clientY+'px'});

// Audio context pour sons de métro
let audioCtx;
let ambientStarted=false;

function startAmbient(){
  if(ambientStarted)return;
  ambientStarted=true;
  audioCtx=new (window.AudioContext||window.webkitAudioContext)();
  
  // Bruit de fond sourd (tunnel)
  const tunnel=audioCtx.createOscillator();
  const tunnelGain=audioCtx.createGain();
  const tunnelFilter=audioCtx.createBiquadFilter();
  tunnel.type='sawtooth';
  tunnel.frequency.value=40;
  tunnelFilter.type='lowpass';
  tunnelFilter.frequency.value=100;
  tunnelGain.gain.value=0.04;
  tunnel.connect(tunnelFilter);
  tunnelFilter.connect(tunnelGain);
  tunnelGain.connect(audioCtx.destination);
  tunnel.start();
  
  // Grincement périodique de rails
  setInterval(()=>{
    if(Math.random()<0.3){
      const screech=audioCtx.createOscillator();
      const screechGain=audioCtx.createGain();
      screech.type='sawtooth';
      screech.frequency.value=800+Math.random()*400;
      screechGain.gain.value=0.015;
      screech.connect(screechGain);
      screechGain.connect(audioCtx.destination);
      screech.start();
      screech.frequency.setValueAtTime(screech.frequency.value+200,audioCtx.currentTime+0.1);
      screechGain.gain.setTargetAtTime(0,audioCtx.currentTime,0.15);
      setTimeout(()=>screech.stop(),300);
    }
  },4000);
  
  // Annonce fantôme occasionnelle
  setInterval(()=>{
    if(Math.random()<0.2){
      playAnnounce();
    }
  },15000);
  
  // Son de métro qui passe
  setInterval(()=>{
    if(Math.random()<0.25){
      playTrainPass();
    }
  },8000);
}

function playTrainPass(){
  const duration=3;
  const noise=audioCtx.createBufferSource();
  const bufferSize=audioCtx.sampleRate*duration;
  const buffer=audioCtx.createBuffer(1,bufferSize,audioCtx.sampleRate);
  const data=buffer.getChannelData(0);
  for(let i=0;i<bufferSize;i++){
    data[i]=(Math.random()*2-1)*0.3;
  }
  noise.buffer=buffer;
  
  const filter=audioCtx.createBiquadFilter();
  filter.type='lowpass';
  filter.frequency.value=300;
  
  const gain=audioCtx.createGain();
  gain.gain.setValueAtTime(0,audioCtx.currentTime);
  gain.gain.linearRampToValueAtTime(0.08,audioCtx.currentTime+0.5);
  gain.gain.linearRampToValueAtTime(0.08,audioCtx.currentTime+2);
  gain.gain.linearRampToValueAtTime(0,audioCtx.currentTime+duration);
  
  noise.connect(filter);
  filter.connect(gain);
  gain.connect(audioCtx.destination);
  noise.start();
  
  // Vibration visuelle
  document.body.style.animation='none';
  document.body.offsetHeight;
  document.body.style.animation='shake 0.1s infinite';
  setTimeout(()=>{document.body.style.animation='flicker 0.15s infinite';},duration*1000);
}

function playAnnounce(){
  // Son de "ding dong" d'annonce
  const osc1=audioCtx.createOscillator();
  const osc2=audioCtx.createOscillator();
  const gain=audioCtx.createGain();
  osc1.frequency.value=880;
  osc2.frequency.value=660;
  gain.gain.value=0.03;
  osc1.connect(gain);
  osc2.connect(gain);
  gain.connect(audioCtx.destination);
  osc1.start();
  setTimeout(()=>{osc1.stop();osc2.start();},300);
  setTimeout(()=>osc2.stop(),600);
}

document.addEventListener('click',startAmbient,{once:true});
document.addEventListener('mousemove',startAmbient,{once:true});

function update(){
  const now=new Date();
  const h=now.getHours().toString().padStart(2,'0');
  const m=now.getMinutes().toString().padStart(2,'0');
  const s=now.getSeconds().toString().padStart(2,'0');
  document.getElementById('clock').textContent=h+':'+m;
  document.getElementById('fullClock').textContent=h+':'+m+':'+s;
  if(Math.random()<0.02){
    document.getElementById('clock').textContent='##:##';
    setTimeout(update,200);
  }
}
setInterval(update,1000);
update();

setInterval(()=>{
  ['t1','t2','t3'].forEach(id=>{
    const el=document.getElementById(id);
    if(el){
      let v=parseInt(el.textContent);
      if(v>1){el.textContent=(v-1)+' min';}
      else{el.textContent='< 1 min';el.classList.add('soon');}
    }
  });
},30000);

// Ligne L secrète - cliquable pour aller vers labyrinth
document.querySelectorAll('.departure').forEach(dep=>{
  if(dep.querySelector('.line-L')){
    dep.classList.add('secret-station');
    dep.onclick=()=>{
      if(audioCtx)playTrainPass();
      setTimeout(()=>location.href='labyrinth.html',2000);
    };
  }
});

// SECRET: rouge.mp4 - cliquer sur la ligne X avec ERR
document.getElementById('lineXerr').onclick=()=>{
  const popup=document.createElement('div');
  popup.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:10000';
  popup.innerHTML='<video src="rouge.mp4" controls autoplay style="max-width:80%;max-height:80%"></video>';
  popup.onclick=()=>popup.remove();
  document.body.appendChild(popup);
};
</script>
</body>
</html>
